server {
    listen 80;

    # Path to the static files from your React build
    root /usr/share/nginx/html;
    index index.html;

    # This is crucial for single-page applications (SPAs) like React.
    # It ensures that refreshing a page or directly accessing a URL
    # like /my-page still loads your app correctly.
    location / {
        try_files $uri /index.html;
    }

    # This block forwards all requests starting with /api/ to your backend
    location /api/ {
        # IMPORTANT: Replace 'backend-service' with the actual service name
        # of your backend container (e.g., from your docker-compose.yml file).
        proxy_pass http://backend-service:5000/;
    }
}
